asyncapi: 3.0.0
info:
  title: Sample AsyncAPI
  version: '1.0.0'
components:
  messages:
    validMessage:
      # Valid - all allowed fields for AsyncAPI 3 (no messageId)
      headers:
        type: object
      payload:
        type: object
      correlationId:
        location: $message.header#/correlationId
      contentType: application/json
      name: UserMessage
      title: User Message
      summary: A message about users
      description: This message represents user data
      tags:
        - name: user
      externalDocs:
        url: https://example.com/docs
      bindings: {}
      examples:
        - name: example1
      traits:
        - contentType: application/json
      x-custom-extension: allowed
    invalidMessage:
      payload:
        type: object
      messageId: "should not be allowed in AsyncAPI 3"
      notAllowedField: "this should also trigger error"
