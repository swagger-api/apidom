import jsonSchema202012Documentation from '../../json-schema/2020-12/json-schema/documentation.ts';
import { compose, assoc } from '../../json-schema/2020-12/target-specs.ts';
import commonSchemaDocumentation from '../../common/schema/documentation.ts';
import { OpenAPI31 } from '../target-specs.ts';
import { DocumentationMeta } from '../../../apidom-language-types.ts';

const documentation: DocumentationMeta[] = [
  {
    docs: '#### Schema Object\n\nThe Schema Object allows the definition of input and output data types.\nThese types can be objects, but also primitives and arrays. This object is a superset of the [JSON Schema Specification Draft 2020-12](https://tools.ietf.org/html/draft-bhutton-json-schema-00).\n\nFor more information about the properties, see [JSON Schema Core](https://tools.ietf.org/html/draft-bhutton-json-schema-00) and [JSON Schema Validation](https://tools.ietf.org/html/draft-bhutton-json-schema-validation-00).\n\nUnless stated otherwise, the property definitions follow those of JSON Schema and do not add any additional semantics.\nWhere JSON Schema indicates that behavior is defined by the application (e.g. for annotations), OAS also defers the definition of semantics to the application consuming the OpenAPI document.\n\n##### Properties\n\nThe OpenAPI Schema Object [dialect](https://tools.ietf.org/html/draft-bhutton-json-schema-00#section-4.3.3) is defined as requiring the [OAS base vocabulary](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#fixed-fields-20), in addition to the vocabularies as specified in the JSON Schema draft 2020-12 [general purpose meta-schema](https://tools.ietf.org/html/draft-bhutton-json-schema-00#section-8).\n\nThe OpenAPI Schema Object dialect for this version of the specification is identified by the URI `https://spec.openapis.org/oas/3.1/dialect/base` (the OAS dialect schema id").\n\nThe following properties are taken from the JSON Schema specification but their definitions have been extended by the OAS:\n\n- description - [CommonMark syntax](https://spec.commonmark.org/) MAY be used for rich text representation.\n- format - See [Data Type Formats](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#dataTypeFormat) for further details. While relying on JSON Schema\'s defined formats, the OAS offers a few additional predefined formats.\n\nIn addition to the JSON Schema properties comprising the OAS dialect, the Schema Object supports keywords from any other vocabularies, or entirely arbitrary properties.\n\nThe OpenAPI Specification\'s base vocabulary is comprised of the following keywords:\n\n##### Fixed Fields\n\nField Name | Type | Description\n---|:---:|---\ndiscriminator | [Discriminator Object](#discriminator-object) | Adds support for polymorphism. The discriminator is an object name that is used to differentiate between other schemas which may satisfy the payload description. See [Composition and Inheritance](#composition-and-inheritance-polymorphism) for more details.\nxml | [XML Object](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#xml-object) | This MAY be used only on properties schemas. It has no effect on root schemas. Adds additional metadata to describe the XML representation of this property.\nexternalDocs | [External Documentation Object](#external-documentation-object) | Additional external documentation for this schema.\nexample | Any | A free-form property to include an example of an instance for this schema. To represent examples that cannot be naturally represented in JSON or YAML, a string value can be used to contain the example with escaping where necessary. **Deprecated:** The `example` property has been deprecated in favor of the JSON Schema `examples` keyword. Use of `example` is discouraged, and later versions of this specification may remove it.\n\nThis object MAY be extended with [Specification Extensions](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#specification-extensions), though as noted, additional properties MAY omit the `x-` prefix within this object.\n\n###### Composition and Inheritance (Polymorphism)\n\nThe OpenAPI Specification allows combining and extending model definitions using the `allOf` property of JSON Schema, in effect offering model composition.\n`allOf` takes an array of object definitions that are validated *independently* but together compose a single object.\n\nWhile composition offers model extensibility, it does not imply a hierarchy between the models.\nTo support polymorphism, the OpenAPI Specification adds the `discriminator` field.\nWhen used, the `discriminator` will be the name of the property that decides which schema definition validates the structure of the model.\nAs such, the `discriminator` field MUST be a required field.\nThere are two ways to define the value of a discriminator for an inheriting instance.\n- Use the schema name.\n- Override the schema name by overriding the property with a new value. If a new value exists, this takes precedence over the schema name.\nAs such, inline schema definitions, which do not have a given id, *cannot* be used in polymorphism.\n\n###### XML Modeling\n\nThe [xml](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#schemaXml) property allows extra definitions when translating the JSON definition to XML.\nThe [XML Object](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md#xml-object) contains additional information about the available options.\n\n###### Specifying Schema Dialects\n\nIt is important for tooling to be able to determine which dialect or meta-schema any given resource wishes to be processed with: JSON Schema Core, JSON Schema Validation, OpenAPI Schema dialect, or some custom meta-schema.\n\nThe `$schema` keyword MAY be present in any root Schema Object, and if present MUST be used to determine which dialect should be used when processing the schema. This allows use of Schema Objects which comply with other drafts of JSON Schema than the default Draft 2020-12 support. Tooling MUST support the <a href="#dialectSchemaId">OAS dialect schema id</a>, and MAY support additional values of `$schema`.\n\nTo allow use of a different default `$schema` value for all Schema Objects contained within an OAS document, a `jsonSchemaDialect` value may be set within the <a href="#openapi-object">OpenAPI Object</a>. If this default is not set, then the OAS dialect schema id MUST be used for these Schema Objects. The value of `$schema` within a Schema Object always overrides any default.\n\nWhen a Schema Object is referenced from an external resource which is not an OAS document (e.g. a bare JSON Schema resource), then the value of the `$schema` keyword for schemas within that resource MUST follow [JSON Schema rules](https://tools.ietf.org/html/draft-bhutton-json-schema-00#section-8.1.1).\n\n##### Schema Object Examples\n\n###### Primitive Sample\n\n\n\\\nJSON\n```json\n{\n  "type": "string",\n  "format": "email"\n}\n```\n\n\n\\\nYAML\n```yaml\ntype: string\nformat: email\n```\n\n###### Simple Model\n\n\n\\\nJSON\n```json\n{\n  "type": "object",\n  "required": [\n    "name"\n  ],\n  "properties": {\n    "name": {\n      "type": "string"\n    },\n    "address": {\n      "$ref": "#/components/schemas/Address"\n    },\n    "age": {\n      "type": "integer",\n      "format": "int32",\n      "minimum": 0\n    }\n  }\n}\n```\n\n\n\\\nYAML\n```yaml\ntype: object\nrequired:\n- name\nproperties:\n  name:\n    type: string\n  address:\n    $ref: \'#/components/schemas/Address\'\n  age:\n    type: integer\n    format: int32\n    minimum: 0\n```\n\n###### Model with Map/Dictionary Properties\n\nFor a simple string to string mapping:\n\n\n\\\nJSON\n```json\n{\n  "type": "object",\n  "additionalProperties": {\n    "type": "string"\n  }\n}\n```\n\n\n\\\nYAML\n```yaml\ntype: object\nadditionalProperties:\n  type: string\n```\n\nFor a string to model mapping:\n\n\n\\\nJSON\n```json\n{\n  "type": "object",\n  "additionalProperties": {\n    "$ref": "#/components/schemas/ComplexModel"\n  }\n}\n```\n\n\n\\\nYAML\n```yaml\ntype: object\nadditionalProperties:\n  $ref: \'#/components/schemas/ComplexModel\'\n```\n\n###### Model with Example\n\n\n\\\nJSON\n```json\n{\n  "type": "object",\n  "properties": {\n    "id": {\n      "type": "integer",\n      "format": "int64"\n    },\n    "name": {\n      "type": "string"\n    }\n  },\n  "required": [\n    "name"\n  ],\n  "example": {\n    "name": "Puma",\n    "id": 1\n  }\n}\n```\n\n\n\\\nYAML\n```yaml\ntype: object\nproperties:\n  id:\n    type: integer\n    format: int64\n  name:\n    type: string\nrequired:\n- name\nexample:\n  name: Puma\n  id: 1\n```\n\n###### Models with Composition\n\n\n\\\nJSON\n```json\n{\n  "components": {\n    "schemas": {\n      "ErrorModel": {\n        "type": "object",\n        "required": [\n          "message",\n          "code"\n        ],\n        "properties": {\n          "message": {\n            "type": "string"\n          },\n          "code": {\n            "type": "integer",\n            "minimum": 100,\n            "maximum": 600\n          }\n        }\n      },\n      "ExtendedErrorModel": {\n        "allOf": [\n          {\n            "$ref": "#/components/schemas/ErrorModel"\n          },\n          {\n            "type": "object",\n            "required": [\n              "rootCause"\n            ],\n            "properties": {\n              "rootCause": {\n                "type": "string"\n              }\n            }\n          }\n        ]\n      }\n    }\n  }\n}\n```\n\n\n\\\nYAML\n```yaml\ncomponents:\n  schemas:\n    ErrorModel:\n      type: object\n      required:\n      - message\n      - code\n      properties:\n        message:\n          type: string\n        code:\n          type: integer\n          minimum: 100\n          maximum: 600\n    ExtendedErrorModel:\n      allOf:\n      - $ref: \'#/components/schemas/ErrorModel\'\n      - type: object\n        required:\n        - rootCause\n        properties:\n          rootCause:\n            type: string\n```\n\n###### Models with Polymorphism Support\n\n\n\\\nJSON\n```json\n{\n  "components": {\n    "schemas": {\n      "Pet": {\n        "type": "object",\n        "discriminator": {\n          "propertyName": "petType"\n        },\n        "properties": {\n          "name": {\n            "type": "string"\n          },\n          "petType": {\n            "type": "string"\n          }\n        },\n        "required": [\n          "name",\n          "petType"\n        ]\n      },\n      "Cat": {\n        "description": "A representation of a cat. Note that `Cat` will be used as the discriminator value.",\n        "allOf": [\n          {\n            "$ref": "#/components/schemas/Pet"\n          },\n          {\n            "type": "object",\n            "properties": {\n              "huntingSkill": {\n                "type": "string",\n                "description": "The measured skill for hunting",\n                "default": "lazy",\n                "enum": [\n                  "clueless",\n                  "lazy",\n                  "adventurous",\n                  "aggressive"\n                ]\n              }\n            },\n            "required": [\n              "huntingSkill"\n            ]\n          }\n        ]\n      },\n      "Dog": {\n        "description": "A representation of a dog. Note that `Dog` will be used as the discriminator value.",\n        "allOf": [\n          {\n            "$ref": "#/components/schemas/Pet"\n          },\n          {\n            "type": "object",\n            "properties": {\n              "packSize": {\n                "type": "integer",\n                "format": "int32",\n                "description": "the size of the pack the dog is from",\n                "default": 0,\n                "minimum": 0\n              }\n            },\n            "required": [\n              "packSize"\n            ]\n          }\n        ]\n      }\n    }\n  }\n}\n```\n\n\n\\\nYAML\n```yaml\ncomponents:\n  schemas:\n    Pet:\n      type: object\n      discriminator:\n        propertyName: petType\n      properties:\n        name:\n          type: string\n        petType:\n          type: string\n      required:\n      - name\n      - petType\n    Cat:  ## "Cat" will be used as the discriminator value\n      description: A representation of a cat\n      allOf:\n      - $ref: \'#/components/schemas/Pet\'\n      - type: object\n        properties:\n          huntingSkill:\n            type: string\n            description: The measured skill for hunting\n            enum:\n            - clueless\n            - lazy\n            - adventurous\n            - aggressive\n        required:\n        - huntingSkill\n    Dog:  ## "Dog" will be used as the discriminator value\n      description: A representation of a dog\n      allOf:\n      - $ref: \'#/components/schemas/Pet\'\n      - type: object\n        properties:\n          packSize:\n            type: integer\n            format: int32\n            description: the size of the pack the dog is from\n            default: 0\n            minimum: 0\n        required:\n        - packSize\n```',
    targetSpecs: OpenAPI31,
  },
  ...compose(jsonSchema202012Documentation, assoc(OpenAPI31)),
  ...commonSchemaDocumentation,
];

export default documentation;
