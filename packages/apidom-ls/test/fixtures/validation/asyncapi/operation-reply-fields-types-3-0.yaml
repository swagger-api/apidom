asyncapi: 3.0.0
info:
  title: Test API
  version: 1.0.0
channels:
  testChannel:
    address: /test
operations:
  testOperation:
    action: send
    channel:
      $ref: '#/channels/testChannel'
    reply:
      # Valid - address is an object
      address:
        location: $message.header#/replyTo
      # Valid - channel is a reference
      channel:
        $ref: '#/channels/testChannel'
      # Valid - messages is an array
      messages:
        - $ref: '#/components/messages/testMessage'
components:
  messages:
    testMessage:
      payload:
        type: object
